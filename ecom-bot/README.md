# Shoply Support Bot

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–Ø–∑—ã–∫:** Python 3.10+  
**–§—Ä–µ–π–º–≤–æ—Ä–∫:** LangChain 1.0+  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π FAQ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤.


## üìå –û–ø–∏—Å–∞–Ω–∏–µ

`Shoply Support Bot` ‚Äî —ç—Ç–æ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç, –∏–º–∏—Ç–∏—Ä—É—é—â–∏–π —Ä–∞–±–æ—Ç—É —Å–ª—É–∂–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞.  
–û–Ω —É–º–µ–µ—Ç:

- –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ) –∏–∑ —Ñ–∞–π–ª–∞ `data/faq.json`.
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –ø–æ –∫–æ–º–∞–Ω–¥–µ `/order <–Ω–æ–º–µ—Ä>`.
- –ó–∞–ø–æ–º–∏–Ω–∞—Ç—å –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ **–≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏**.
- –í–µ–∂–ª–∏–≤–æ –æ–±—â–∞—Ç—å—Å—è **—Ç–æ–ª—å–∫–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**.
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–∏–∞–ª–æ–≥–∏ –≤ —Ñ–∞–π–ª—ã —Ñ–æ—Ä–º–∞—Ç–∞ JSONL (–æ–¥–∏–Ω —Ñ–∞–π–ª –Ω–∞ —Å–µ—Å—Å–∏—é).

–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å **–ª—é–±—ã–º OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º API**, –≤–∫–ª—é—á–∞—è Yandex Cloud, Cloud.ru, OpenRouter –∏ –¥—Ä—É–≥–∏–µ.


## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10 –∏–ª–∏ –≤—ã—à–µ
- –§–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö:
  - `data/faq.json` ‚Äî –±–∞–∑–∞ —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
  - `data/orders.json` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö
- –§–∞–π–ª `.env` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (—Å–º. –Ω–∏–∂–µ)



## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç** (–∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä, `shoply/`).
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `uv` –∏–ª–∏ `pip`):

   ```bash
   pip install langchain langchain-openai langchain-community python-dotenv httpx
   ```

3. –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ –∏ —Ñ–∞–π–ª–æ–≤:

ecom-bot/
‚îú‚îÄ‚îÄ data/                 # –î–∞–Ω–Ω—ã–µ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ faq.json          # –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ orders.json       # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö
‚îú‚îÄ‚îÄ logs/                 # –õ–æ–≥–∏ —Å–µ—Å—Å–∏–π (JSONL)
‚îÇ   ‚îî‚îÄ‚îÄ session_01.jsonl  # –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞ —Å–µ—Å—Å–∏–∏
‚îú‚îÄ‚îÄ .env                  # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é)
‚îú‚îÄ‚îÄ .env.example          # –®–∞–±–ª–æ–Ω –¥–ª—è .env
‚îú‚îÄ‚îÄ .gitignore            # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ app.py                # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ README.md             # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python

4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` (–ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ).

---

## üîê –§–∞–π–ª `.env`

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
OPENAI_API_KEY=sk-–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å
OPENAI_MODEL=–º–æ–¥–µ–ª—å –∏–∑ cloud.ru
BASE_URL=https://foundation-models.api.cloud.ru/v1
```

> üí° **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ API**:  
> - OpenAI (`https://api.openai.com/v1`)  
> -  Cloud.ru (`https://foundation-models.api.cloud.ru/v1`)  
    Yandex Cloud - –Ω—É–∂–µ–Ω –µ—â–µ id_folder (—Ç—É—Ç –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–∫–∞)
> - –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

---

## üìÅ –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### `data/faq.json`
```json
[
  {
    "q": "–ö–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç?",
    "a": "–í–æ–∑–≤—Ä–∞—Ç –º–æ–∂–Ω–æ –æ—Ñ–æ—Ä–º–∏—Ç—å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 14 –¥–Ω–µ–π."
  },
  {
    "q": "–ï—Å—Ç—å –ª–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞?",
    "a": "–î–∞, –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 3000 —Ä—É–±–ª–µ–π."
  }
]
```

### `data/orders.json`
```json
{
  "55555": {
    "status": "processing",
    "note": "–û–∂–∏–¥–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ"
  },
  "66666": {
    "status": "in_transit",
    "eta_days": 3,
    "carrier": "–ü–æ—á—Ç–∞ –†–æ—Å—Å–∏–∏"
  },
  "77777": {
    "status": "delivered",
    "delivered_at": "2025-12-20"
  }
}
```

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç—Ä–∏ —Å—Ç–∞—Ç—É—Å–∞:
- `processing` ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `note`)
- `in_transit` ‚Äî –≤ –ø—É—Ç–∏ (`eta_days`, `carrier`)
- `delivered` ‚Äî –¥–æ—Å—Ç–∞–≤–ª–µ–Ω (`delivered_at`)

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

```bash
python app.py
```

–ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞:

```
–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Shoply –∑–∞–ø—É—â–µ–Ω!
 - –î–ª—è –≤—ã—Ö–æ–¥–∞ –≤–≤–µ–¥–∏—Ç–µ '—Å—Ç–æ–ø' –∏–ª–∏ '–≤—ã—Ö–æ–¥'.
 - –î–ª—è –∑–∞–ø—Ä–æ—Å–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–∫–∞–∑–µ –≤–≤–µ–¥–∏—Ç–µ: /order <–Ω–æ–º–µ—Ä>

–í—ã(01): /order 55555
–ë–æ—Ç: –ó–∞–∫–∞–∑ ‚Ññ55555 –≤ —Å—Ç–∞—Ç—É—Å–µ: –û–∂–∏–¥–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ.
–í—ã(01): –∞ –∫–∞–∫–æ–π —É –º–µ–Ω—è –∑–∞–∫–∞–∑?
–ë–æ—Ç: –í–∞—à –∑–∞–∫–∞–∑ ‚Ññ55555 –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ: –û–∂–∏–¥–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ.
–í—ã(01): –º–µ–Ω—è –∑–æ–≤—É—Ç –ü–µ—Ç—è
–ë–æ—Ç: –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –ü–µ—Ç—è! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?
–í—ã(01): —Å—Ç–æ–ø
–ë–æ—Ç: –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!
```

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Å–µ—Å—Å–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫—É `logs/` –≤ —Ñ–æ—Ä–º–∞—Ç–µ **JSONL** (–æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ = –æ–¥–∏–Ω –æ–±–º–µ–Ω).

–ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞: `logs/session_01.jsonl`

```json
{"timestamp": "2025-12-27T14:16:29.123456", "user_input": "/order 55555", "bot_response": "–ó–∞–∫–∞–∑ ‚Ññ55555 –≤ —Å—Ç–∞—Ç—É—Å–µ: –û–∂–∏–¥–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ.", "token_usage": {"prompt_tokens": 0, "completion_tokens": 0, "total_tokens": 0}}
```

> üí° –ò–º—è —Ñ–∞–π–ª–∞: `session_{ID}.jsonl` (–±–µ–∑ –¥–∞—Ç—ã, –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞).

---

## üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç "–∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ"

- –ü—Ä–∏ –≤–≤–æ–¥–µ `/order 55555` –±–æ—Ç **–¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é** —Ñ—Ä–∞–∑—É:  
  _¬´–ú–æ–π –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ ‚Äî 55555¬ª_.
- –ü—Ä–∏ –≤–≤–æ–¥–µ _¬´–º–µ–Ω—è –∑–æ–≤—É—Ç –ü–µ—Ç—è¬ª_ ‚Äî —ç—Ç–æ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∫–∞–∫ –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
- –ú–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞**, –ø–æ—ç—Ç–æ–º—É –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞:
  - ¬´–∞ –∫–∞–∫–æ–π —É –º–µ–Ω—è –∑–∞–∫–∞–∑?¬ª
  - ¬´–∫–∞–∫ –º–µ–Ω—è –∑–æ–≤—É—Ç?¬ª

---

## üìé –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Ü–µ–ª–µ–π. –ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –Ω–∞—Ä—É—à–∞—é—â–∏—Ö –ª–∏—Ü–µ–Ω–∑–∏–∏.

---

> üí¨ **–°–æ–≤–µ—Ç**: –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å Yandex Cloud —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à –∫–ª—é—á –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `hosted_vllm/Qwen/Qwen3-Coder-480B-A35B-Instruct`), –∏ —á—Ç–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Ñ–æ—Ä–º–∞—Ç.

---